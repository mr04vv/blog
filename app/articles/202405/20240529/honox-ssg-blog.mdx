---
title: HonoxのSSGで個人ブログを構築しました
date: 2024-05-29T11:51:03.423Z
description: 個人ブログを開設する機運が高まっていたのでHonoxのSSGで個人ブログを構築しました。MDXの使い方やシンタックスハイライトの導入、SSGで記事のタイトルに応じたOGPを生成するなどの情報をまとめてみました。
---


# HonoxのSSGで個人ブログを構築しました

最近アウトプットが全然出来ておらず、個人ブログを開設する機運が高まっていたところに、Honoxという試したい技術が出てきて良い機会だったので勉強がてら個人ブログを作ってみました。

直近はしずかなインターネットで戯言を記していたのですが、せっかくの機会なので思い切って移行しようと思います。


## /** 執筆途中です！**/

↓↓↓OGPテスト
<ExternalOgp url="https://mooriii.com"/>
<ExternalOgp url="https://github.com"/>
<ExternalOgp url="https://github.com/mr04vv"/>
<ExternalOgp url="https://github.com/mr04vv/blog"/>

## Honoxを始める

// ここに始めてからSSGするまでの変遷を書く

// 執筆途中

## MDXを使えるようにする

// MDXを使えるようにする手順をまとめる

### frontmatterでメタデータを設定する

// frontmatterについて書く

### マークダウン記法で使われるコンポーネントを独自のものに差し替える

`useMdxComponents` を定義してあげれば、マークダウン記法で使用されるコンポーネントを差し替えることが出来ます。
```mdx
![画像のタイトル](画像のURL)
```
例えばこんな感じで画像を参照させても、内部的に独自の画像用コンポーネントを使うことも可能です。

// useMdxComponentsとviteconfigの設定を書く

### シンタックスハイライトを導入する

記事内にコードを載せたい場合に必須になるシンタックスハイライトを導入します。
今回は[Rehype Pretty Code](https://rehype-pretty.pages.dev/)を使ってシンタックスハイライトを実現しました。

こんな感じで行数表示とか行ハイライトとかいい感じにやってくれます。
```tsx showLineNumbers{} title="sample.tsx" {5,8-9} /setFloating/#s /refs/#v /adapter/
import { useFloating } from "@floating-ui/react";
 
function MyComponent() {
  const { refs, floatingStyles } = useFloating();
 
  return (
    <>
      <div ref={refs.setReference} />
      <div ref={refs.setFloating} style={floatingStyles} />
    </>
  );
}
```

// ここに設定方法とリンクのOGPっぽいものを表示する

## ルーティングの設定

// slugを使って動的ルーティングにした

## OGPもSSGのビルド時に生成するようにした
今回はSSGで事前にHtmlを生成するようにしたのですが、記事のタイトルで変化するOGPもビルド時に生成するようにしました。

// slugで動的ルーティングに合わせたOGPを取れるように
// budouxでめちゃくちゃ詰まった
// externalの設定とかいっぱいあった
// satori使った


## bun shellで記事の雛形を作ってもらう

本ブログの記事のmdxファイルは `articles/yyyyMM/yyyyMMdd/**.mdx` というディレクトリの中に保存するようにしています。
（絶対に日付順に並んでいて欲しいのと、記事が溜まってきてもある程度縦に長くならないようにしたいという強いこだわりの結果こうなりました🥹）

いちいち該当ディレクトリに記事ファイルを作成するのと、記事のメタデータ(frontmatter)に作成日を入れるのも面倒だったので、[bun shell]()でファイルの自動作成とメタデータの生成をやってもらうことにしました。

![](createEntry.gif)

shellの実行が完了するとこんな感じのファイルが吐き出されます。

```mdx
---
title: 最初の記事
date: 2024-05-29T13:16:07.130Z
description: 
---

# 最初の記事
```

shellの最後にエディタで作成したファイルを開く記述をしているので、作成後にエディタで開いてくれるのですが、これが地味に便利です。

```shell
await $`code ./app/articles/${YYYYmm}/${YYYYmmdd}/${entryPath}.mdx`;
```

## おわりに

結構どん詰まりしまくって大変でしたが、久しぶりに色んな知らない技術をさわれたので楽しかったです。

機能追加とかUIデザインとかフォント選びとかまだまだ色々とやりたいことがたくさんあるので少しずつアップデートしていこうと思います。



それでは。

![愛猫のらてさん](latte.jpg)
